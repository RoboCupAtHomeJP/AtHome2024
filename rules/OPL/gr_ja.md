<sub>[READMEへ](../../README.md)</sub>

[日本語](./gr_ja.md) | [English](./gr_en.md)

# 一般的なルールと規定 (General Rules and Regulations)

こちらでは，RoboCup JapanOpen @Homeリーグ2024（以下，*RCJ2024*と呼ぶ）の競技の一般的なルールと規定である．
このセクションのすべてのルールは，「その競技のルールに記載がない限り」という条件を含んでいるものとみなす．
すなわち，競技の仕様に関して特に追加または反対のルールがある場合，一般的なルールと規定よりも優先されます．

> [!NOTE]  
> *RCJ2024 一般的なルールと規定*は，[RoboCup 2023.2 Rulebook (Revision-0)](https://github.com/RoboCupAtHome/RuleBook/releases/tag/2023.2)の*Chapter 3: General Rules & Regulations*に基づいている．

> [!IMPORTANT]  
> [RoboCup 2023.2 Rulebook (Revision-0)](https://github.com/RoboCupAtHome/RuleBook/releases/tag/2023.2)に関連するこのページに記載されていない変更は考慮されないとする．
したがって，ルールは*GitHub Issues*と*Team Leader Meeting*（TLM）を通じて参加チームとの議論を経て最終的に確定される．

> [!IMPORTANT]  
> *一般的なルールと規定*の日本語版と英語版の間に矛盾がある場合，**日本語版**が優先される．


## チーム登録と審査 (Team Registration and Qualification)

### 登録と審査プロセス (Registration and Qualification Process)

チーム登録は，RoboCup JapanOpen委員会を通じて行われます．*RCJ2024*への参加には，以下の2つのフェーズがある．

1. 事前登録 (Pre-registration)

1. ~~審査プロセス (Qualification process)~~

1. 最終登録 (Final registration)

事前登録は，*RoboCup@Home JapanOpenメーリングリスト*と*Discord*に参加フォームが送信されることで発表される．
審査プロセスは行われない．
登録を完了したすべてのチームが参加できる．

### 事前登録 (Pre-registration)

以下のリンクを使用して，*RCJ2024*に登録してください．
チーム登録の締め切りは**TBD**である．

> [!NOTE]
> 事前登録フォーム: **TBD**

以下のリーグが開催されますので，ご注意ください．
複数のリーグに参加する場合は，各リーグごとに別々の登録フォームに記入してください．

- Open Platform League（OPL）
- Domestic Standard Platform League（DSPL）
- Education League
- Simulation Open Platform League（S-OPL）
- ~~Social Standard Platform League (SSPL)~~

> [!NOTE]
> SSPLチームはOPLに参加することになるが，マニピュレーションに関連するタスクを完了することができない場合がある．

> [!IMPORTANT]  
> すべてのリーグは**オンサイトのみ**で開催されます．ご注意ください．

### 最終登録

*RCJ2024*の最終登録は，以下のウェブサイトの*参加登録*（Googleフォーム）を使用して行われる．
詳細については，公式ウェブサイトの[登録手続き](https://www.robocup.or.jp/japanopen2024/)を参照してください．

事前登録時に発行されたチームコードを使用してください．

> [!NOTE]  
> 最終登録フォーム: **TBD**


## 組織 (Organization)

### 技術委員会 - TC (Technical Committee - TC)

*技術委員会*（Technical Committee, TC）は，リーグのルールと競技の進行に責任を持っている．
TCは，前年の優勝チームから1名と準優勝チームから1名のメンバーで構成されている．
TCの主な責任は，競技の管理，ルールブックの作成，審判となる．

### 運営委員会 - OC (Organizing Committee - OC)

*運営委員会*（Organizing Committee, OC）は，競技の組織に責任を持っている．
具体的には，スケジュールの作成やシナリオに関する情報の提供を行いる．
一方，*現地組織委員会*（Local Organizing Committee, LOC）は，競技会場の設営と組織に責任を持っている．


## 観客とのインタラクション (Audience interaction)

RoboCup@Homeを魅力的にするためには，観客にロボットがどのようなことをすべきか，実際にどのようなことをしているかを示すことが重要である．
特に，ロボットの行動について観客に情報を提供することは，リーグの進歩にとって重要となる．
そのため，ロボットの行動を説明したり，ロボットにそれを説明させたりするために，各チームから協力をお願いする場合がある．

イベントの主催者として，できる限り観客がロボットの行動を妨げないように配慮する．
ただし，各チームは，例えば観客の動きによってロボットの認識システムに影響が出るなど，*Arena*内で行われるタスクに影響を与えないための対策を考慮する必要がある．


## シナリオ (Scenario)

ほとんどの競技テストは*アリーナ (Arena)*で行われますが，一部のテストは事前に知られていない公共の場所で行われる場合がある．
このセクションでは，テストとリーグ間で共通の家具やその他の情報が記載されている[*アリーナ (Arena)*](#アリーナ-arena)とその内容について説明する．

### アリーナ (Arena)

*Arena*は，[WRS2020](https://wrs.nedo.go.jp/wrs2020/challenge/download/Rules/DetailedRules_Partner_EN.pdf)のセットアップに基づいた，相互に接続された部屋からなる現実的な家庭の設定（アパートメント）となる．

最小構成は次のようになる．
- リビングルーム: "living room"
- ダイニングルーム: "dining room"

通常，OPL用の*Arena*が1つあり，すべてのリーグで共有の*Arena*が1つある．
現地組織委員会によっては，お互いにわずかに異なる複数の*Arena*がある場合もあり，ロボットはどの*Arena*でも任意のタスクを実行できるように準備する必要がある．

ただし，ロボットが実世界で機能する必要があるため，*Arena*は固定されておらず，予告なく変更される場合がある．

1. **メジャー変更 (Major changes)**: 日常の環境で完全に静止することが期待できない家具（事前に定義された場所にあるかどうかに関係なく）は，テスト間でわずかに移動する場合がある．
特に，家具は部屋を変更したり，部屋の中で大幅に移動したりすることはありませんが，ソファやテーブルはわずかに回転したり移動したりすることがある．
このような家具の固定位置は想定しないでください．
壁はそのままであり，部屋のレイアウトは変わらない．
通路はブロックされる場合がる．

1. **マイナー変更 (Minor changes)**: わずかに移動した椅子，わずかに閉じたドアなど，同様にいつでも起こり得る．

### 壁，ドア，床 (Walls, Doors and Floor)
<!-- OPL -->
室内の家庭設定は，標準的で公正で低コストな建築材料を使用して作られた低い壁で囲まれています．

1. **壁 (Wall)**: 壁は固定され，競技中に変更されない．
[選択された材料](https://www.bestcarton.com/cardboard/flex/index.php?as=700&bs=450&cs=150&mm=25&fl=4)は段ボールで，壁の高さは0.45 \[m\]である．
よって，観客が競技を見ることができます．

1. **ドア (Doors)**: *Arena*内部では，部屋はドアで接続されていない．
出入口は1つだけで，ロボットが*Arena*に入った直後に閉まる．

1. **床 (Floor)**: *Arena*の床とドアの入り口は平らであり，重要な段差や階段はない．
ただし，カーペット，異なるエリア間の床のカバリングの変化，ドアの入り口などでわずかな凹凸が予想される．

1. **外観 (Appearance)**: 床と壁は主に単色ですが，床にはカーペット，壁にはポスターや絵などのテクスチャが含まれる場合がある．

### 家具 (Furniture)

<!-- OPL -->
アリーナの最小構成は次のようになる．
- living room
  - bin_a
  - bin_b
  - bin_c
  - bin_d
  - long_table_a
    - tray_a
    - tray_b
    - container_a
    - container_b
  - long_table_b
  - tall_table
- dining room
  - shelf
  - chair_a
  - chair_b

> [!NOTE]
> 競技タスクに応じて，さらなる家具が追加/交換される場合がある．

### オブジェクト (Objects)

*RCJ2024*の一部の競技では，オブジェクトの認識と操作が必要である．
TCはこのためにオブジェクトのリストを作成する．
リストには，各オブジェクトの*写真*，*公式名*，および*オブジェクトのカテゴリ*（例えば，*Noodle*は*Food*カテゴリに属する）が含まれる．
ほとんどのオブジェクトは軽量で，片手で簡単につかむことができる．
各*オブジェクトのカテゴリ*には，通常そのカテゴリのオブジェクトが見つかるか配置される*事前定義された場所*が割り当てられている（例えば，*Food*は*Kitchen Table*に配置される）．
事前に公開しない情報は*Setup Days*に発表される．

学習用にオブジェクトが競技会場で提供される．
参加チームがオブジェクトのセットを持っていない場合，チーム間でオブジェクトを共有することができる．
学習用のオブジェクトの変更は許可されていない．

タスクには3種類のオブジェクトが使用される．
<!-- OPL -->

1. **既知オブジェクト (Known Objects)**：ロボットが事前に知っていたオブジェクトで，以下に分類されます: 

    1. **事前公開オブジェクト (Consistent Objects)**: *Setup Days*に公開されたオブジェクト．

    1. **標準オブジェクト (Standard Objects)**: **TBD**から選ばれたオブジェクト．
これらのオブジェクトは*RCJ2024*競技会の数ヶ月前に公開され，事前に取得と学習ができるようになっている．

1. **未知オブジェクト (Unknown Objects)**: オブジェクトリストにないがマニピュレーションのタスクで使用する他のオブジェクト．
競技のタスクによっては，これらの未知のオブジェクトが使用される場合があります．

1. **ダミーオブジェクト (Dummy Objects)**: *Setup Days*に公開されるが，マニピュレーションのタスクでは使用されないオブジェクト．
これらのオブジェクトは自律ナビゲーション中の障害物やオブジェクト認識中の追加オブジェクトとして使用される．

### 事前定義された部屋と場所 (Predefined Rooms and Locations)

*RCJ2024*の一部の競技では，人やオブジェクトが見つかる*Predefined Location*が設定される．
また，*Arena*には*Entrance*という名前の*Door*があり，*Arena*への出入り口となり．
部屋の名前，事前定義された場所，および場所のクラスは*Setup Days*に発表される．

### 事前定義された人物名 (Predefined Person Names)
<!-- OPL -->

*RCJ2024*の一部の競技では，人物の名前を記憶する必要がある．
*Arena*のすべての人物には，TCによって割り当てられた*Predefined Name*がある．
事前定義された名前は[GPSR Command Generator](https://github.com/johaq/CommandGenerator/tree/master)から選ばれ，*Setup Days*に発表される．

### 無線ネットワーク (Wireless network)

無線通信には，*アリーナネットワーク*が提供される．
実際のインフラストラクチャは，現地組織委員会によって決まるものである．
ネットワークの信頼性とパフォーマンスは**保証されません**．
ロボットは無線ネットワークなしでも動作できることが期待されている．

<!-- OPL -->
以下のルールが適用される．
- 競技中には*アリーナネットワーク*のみを使用できる．
- 競技中のチームのみが*アリーナネットワーク*を使用することが許可されている．
- VLANはインターネットにも接続されている．
- モバイルルーターの使用は許可されている．ただし，以下の条件を満たす必要がある．
  - LANケーブルを介してロボットとインターネット接続できること
  - VLAN（無線ネットワーク）をブロードキャストしないこと
  - チームメンバーがキーボード，マウス，リモコン，コンピュータなどの電子機器に近づいていないこと
<!-- - *アリーナネットワーク*は，各チームごとに1つの仮想ローカルエリアネットワーク（VLAN）を提供します． -->
<!-- - 各VLANにはおそらく独自のSSID/パスワードがあります． -->
<!-- - VLANトラフィックは他のチームから分離され，チームエリアのネットワークケーブルにルーティングされます． -->

不正な無線ネットワークをブロードキャストするチームは競技から失格となり，デバイスはOCによって一時的に没収される場合がある．
これにはスマートフォンや隠しSSIDも含まれる．
そのため，このような違反がないかデバイスを確認することを推薦する．

> [!WARNING]
> 競技中，現地組織委員会が提供する無線通信ネットワークは**安定していない場合がある**．


## ロボット (Robots)
*RCJ2024*で使用されるロボットは，以下の要件を満たす必要がある．
これらのルールは，[*Robot Inspection*](./ri_ja.md)で検査される．

### ロボットの数 (Number of Robots)

1. **登録**: チームごとの最大ロボット数は*2台*となる．
競技に参加できるのは，[*Robot Inspection*](./ri_ja.md)をクリアしたロボットのみとなる．

1. **競技**: 各競技には1台のロボットのみが許可されている．
異なる競技では，異なるロボットを使用することができる．

1. **Open Challenge**: *Open Challenge*では，両方のロボットを同時に使用することができる．

### ロボットの仕様 (Robot Specifications)
*RCJ2024*に参加するロボットは，安全仕様に準拠している必要がある．

#### サイズと重量 (Size and Weight)

1. **寸法**: ロボットの寸法は，*Arena*のドアの制限（1.2[m]）を超えてはならない．
TCは，より大きなロボットの資格と登録を許可する場合がありますが，現地の制約により，ロボットが実際に*Arena*に入ることが保証されない場合がある．
相談の場合は，*Local Organizing Committee*（LOC）または*Technical Committee*（TC）に連絡してください．

1. **重量**: 特定の重量制限はない．
ただし，ロボットの重量と床への圧力は，競技が行われる場所の地域規制を超えてはならない．

1. **輸送**: チームメンバーは，ロボットを迅速に*Arena*から移動する責任がある．
ロボットが自力で移動できない場合（何らかの理由で），チームメンバーはロボットを迅速かつ容易に輸送できる必要がある．

#### 外観と安全性 (Appearance and Safety)

1. **カバー**: ロボットの内部ハードウェア（電子部品やケーブル）は，安全性が確保されるようにカバーされている必要がある．
（目に見える）ダクトテープの使用は厳禁である．

1. **ゆるんだケーブル**: ロボットからはみ出たゆるんだケーブルは許可されていない．

1. **安全性**: ロボットには人に害を及ぼす可能性のある鋭いエッジや要素がないようにする必要がある．

1. **迷惑行為**: ロボットは連続的に大きな音を出したり，まばゆい光を使用したりしてはならない．

1. **移動**: 安全のため，ロボットは移動時に注意を払う必要がある．
障害物回避は必須です．

#### 緊急停止ボタン (Emergency Stop Button)

1. **アクセシビリティと可視性**: 各ロボットは，簡単にアクセスでき，見える位置に*緊急停止*ボタンを備えている必要がある．

1. **色**: *緊急停止*は赤色であり，ロボット上で唯一の赤いボタンである必要があります．
TCは，ロボットに他の赤いボタンがある場合，それをテープで覆ったり取り外したりするようにチームに要求する場合がある．

1. **ロボットの動作**: *緊急停止*ボタンが押されると，ロボットとそのすべての部品は即座に停止する必要がある．

<!-- N/A -->
<!-- #### Start Button -->

<!-- 1. **Requirements**: Teams that aren’t able to carry out the default start signal (opening the door) have to provide a *Start Button* that can be used to start tests.
Teams need to announce this to the TC before every test that involves a start signal, including the *Robot Inspection*.
1. **Definition**: The *Start Button* can be any “one-button procedure” that can be easily executed by a referee
(such as releasing the *Emergency Stop*, a green button, or a software button in a graphical user interface). -->


## 外部デバイス (External devices)
競技中にチームが使用するロボットの一部ではないものは，*外部デバイス (External devices)*と見なされます．
すべての*External devices*は，[Robot Inspection](https://github.com/RoboCupAtHomeJP/AtHome2024/blob/rules/opl/robot_inspection.md)に*技術委員会*（TC）によって承認される必要がある．
TCは，*External devices*が自由に使用できるか，または審判の監視下で使用するか，およびスコアへの影響を決定する．

ハンドマイクやヘッドセットなどのワイヤレスデバイスの使用は許可されていないが，以下で指定されている*外部コンピューティング (External Computing)*を除く．
また，競技の主催者は，*Arena*内のネットワークやインターネット接続の可用性や信頼性について保証または責任を負わない．
したがって，チームは自己責任で*External Computing*リソースを使用することとなる．

### オンサイト外部コンピューティング (On-site External Computing)

ロボットに物理的に接続されていないコンピューティングリソースは，*外部コンピューティング (External Computing)*リソースと見なされます．
*External Computing*リソースの使用は許可されていますが，*アリーナネットワーク*内でのみ許可され，TCの事前承認が必要である．
チームは，競技の1か月前までにTCに*External Computing*の使用について通知する必要がある．
ただし，*External Computing*が利用できない場合でも，ロボットは安全に動作できることが求められる．

*External Computing*デバイスは，TCによって*外部コンピューティングリソースエリア*（External Computing Resource Area, ECRA）として発表される場所に配置する必要がある．
主催者は，ECRAにアリーナのワイヤレスネットワークに接続するためのLANスイッチの持参をチームに要求する場合がある．
<!-- *競技*中，ECRAには最大2台のノートパソコンと異なるチームの2人が同時に入ることが許可されます．次のチームのメンバー1人ずつです．
スクリーン，マウス，キーボードなどの周辺機器の使用は許可されていません． -->

競技中は，誰もECRAから少なくとも1 \[m\]離れる必要がある．
審判が競技の開始合図を出した後にECRA内の何かに干渉すると，テストは0点で停止される．

<!-- もしノートパソコンが*External Computing*として使用される場合，チームは自分たちの*競技*が次である場合にのみECRAに配置することができ，テスト終了後すぐにデバイスを取り外す必要があります． -->

### オンラインの外部コンピューティング (On-line External Computing)

チームは，*アリーナネットワーク (Arena Network)*のインターネット接続を介して*External Computing*を使用することが許可されている．
これにはクラウドサービスやオンラインAPIなどが含まれます．
これらは競技の1か月前までにTCに通知し，承認を得る必要がある．


## 大会の体系

### 大会システム
大会は，*Robot Inspection*，競技タスク，そして*Technical Challenge*という流れで進行される．

1. **Robot Inspection**: 安全のため，ロボットは*Setup Days*中に検査される．
ロボットは[*Robot Inspection*](ri_ja.md)に合格することによって，競技に参加することが許可される．

1. **競技タスク**: *Robot Inspection*に合格したすべてのチームが，*競技タスク*に参加することができる．

1. **Open Challenge**: *Robot Inspection*に合格したすべてのチームは，*Open Challenge*（旧: Finals）に参加する権利がある．

### スケジュール (Schedule)

*RCJ2024*は，複数日にわたって開催される．
スケジュールは[AtHome2024](https://github.com/RoboCupAtHomeJP/AtHome2024)リポジトリで公開される．

### スコアリングシステム (Scoring System)

各タスクには主目標とボーナススコアのセットがある．
主目標が部分的に達成された場合でも，ボーナスポイントを獲得することができる．
<!-- テストでスコアを獲得するには，タスクの主目標を成功裏に達成する必要があります． -->
<!-- それ以外の場合はボーナスは授与されません． -->

スコアリングシステムには以下の制約がある．

1. **競技タスク**: タスクごとの最大総合スコアは*500ポイント*（ボーナスを含む）である．

1. **Technical Challenge**: スコアは正規化される．

1. **最低スコア**: テストごとの最低総合スコアは*0ポイント*である．

原則として，チームはマイナスポイントを受け取ることはありませんが，ペナルティを受ける場合は例外です．
特に，出席しないことに対するペナルティは，総合的なマイナススコアにつながる可能性がある．

> [!NOTE]
> *競技タスク*のスコアリングは*Technical Challenge*のスコアリングとは独立している．
したがって，各チャレンジごとに別々の授賞が配布される．

### 競技タスクの評価 (Regular Tasks Evaluation)

スコアリングは*2名の異なるチームメンバー*によって行われる．
競技するチームのメンバーと別のチームのメンバーが，次の式に従ってスコアリングを行う．
- チーム $` (a+n) mod. n `$ から*1名*のスコアリングメンバー
- チーム $` (1+a+n) mod. n `$ から*1名*のスコアリングメンバー

> [!NOTE]
> $` n `$はチームの数を示す．
$` a `$は参加順序を示す．
$` mod. `$は剰余を示す．

例えば，参加チーム数が*3チーム*の場合，順序は以下のようになります: 

- 最初のタスク: 
  - *チーム1*が競技: *チーム1*と*チーム2*からのメンバー（*2名*のスコアリングメンバー）
  - *チーム2*が競技: *チーム2*と*チーム3*からのメンバー（*2名*のスコアリングメンバー）
  - *チーム3*が競技: *チーム3*と*チーム1*からのメンバー（*2名*のスコアリングメンバー）
- 2番目のタスク: 
  - *チーム2*が競技: *チーム2*と*チーム3*からのメンバー（*2名*のスコアリングメンバー）
  - *チーム3*が競技: *チーム3*と*チーム1*からのメンバー（*2名*のスコアリングメンバー）
  - *チーム1*が競技: *チーム1*と*チーム2*からのメンバー（*2名*のスコアリングメンバー）
- 3番目のタスク: 
  - *チーム3*が競技: *チーム3*と*チーム3*からのメンバー（*2名*のスコアリングメンバー）
  - *チーム1*が競技: *チーム1*と*チーム1*からのメンバー（*2名*のスコアリングメンバー）
  - *チーム2*が競技: *チーム2*と*チーム2*からのメンバー（*2名*のスコアリングメンバー）
- 以降も同様に続く


## 競技の手順 (Procedure during Tests)

*RCJ2024*の競技は，予め決められた手順に従って行われる．
以下のポイントに注意してください．

### 安全第一！ (Safety First!)

1. **緊急停止 (Emergency Stop)**: シナリオ内外でロボットを操作しているときに，人や物に対して危険な行動がある可能性がある場合は，オーナーはロボットを*即座に*停止する必要がある．

1. **要請による停止 (Stopping on request)**: 審判，技術委員会または組織委員会のメンバー，連盟の執行役員または理事がロボットを停止した場合，議論はない．
同様に，チームにロボットの停止を指示された場合，ロボットは*即座に*停止する必要がある．

1. **ペナルティ (Penalties)**: チームがこれに従わない場合，*技術委員会*（TC）の決定により，チームとそのメンバーは*即座に*現在の競技から除外される．
さらに，RoboCup JapanOpen Federation Trustee Boardの決定により，チームとそのメンバーは1年以上の期間，次年度の大会への参加を禁止される可能性がある．

### チームメンバーの最大数 (Maximum number of team members)

1. **競技タスク (Regular Tasks)**: 競技中，*Arena*内に許可されるチームメンバーの最大数は*1人*となる．
ただし，ボランティアの支援が明示的に必要なタスクは除外される．

1. **セットアップ (Setup)**: 競技のセットアップ中，*Arena*内のチームメンバーの数に制限はない．

1. **Technical Challenge**: *Technical Challenge*中，*Arena*内のチームメンバーの数に制限はない．

### フェアプレイ (Fair Play)

全てのチームに対して，*フェアプレイ (Fair Play)*と協力的な行動が期待される．
具体的には以下の点に注意してください．

- 他のチームの評価の際
- 審判を務める際
- 他のチームのロボットとの相互作用が必要な際

これには以下も含まれます．

- カンニングを試みないこと（例: 自律動作を装っているが実際にはそうではない）
- ルールを悪用しようとしないこと（例: タスクを解決しようとせずにスコアを稼ごうとすること）
- 故意に他のロボットを失敗させようとしないこと
- 標準プラットフォームのロボットを改造しないこと

> [!WARNING]
> このルールに違反することによって，ネガティブスコア，競技の失格，または大会の失格という形でペナルティが科される場合がある．

### ロボットの予想される振る舞い (Expected Robot’s Behavior)

特に明示されていない限り，ロボットは礼儀正しく友好的な人間と同じように常に振る舞うことが期待される．
<!-- これは，ロボットが割り当てられたタスクを解決する方法にも適用されます．一般的なルールとして，非科学者にタスクをどのように解決するか尋ねることができます． -->

一般のユーザーはロボットの操作手順を知らないことを考慮してください．
したがって，他の人間と同様に対話する必要がある．

### ロボットの自律性とリモートコントロール (Robot Autonomy and Remote Control)

1. **接触禁止 (No touching)**: 競技中，参加者はロボットに触れてはいけない（タスクで明示的に必要な場合を除く）．

1. **自然な相互作用 (Natural interaction)**: ロボットとの相互作用は，ジェスチャーや音声のみが許可されている．

1. **自然なコマンド (Natural commands)**: 直接制御に似たものは禁止されている．

1. **リモートコントロール (Remote Control)**: ロボットのリモートコントロールは厳密に禁止されている．
これにはボタンを押すことやセンサーに意図的に影響を与えることも含まれる．

> [!WARNING]
> このルールに違反することによって，ネガティブスコア，競技の失格，または大会の失格という形でペナルティが科される場合がある．

### 衝突 (Collisions)

1. **接触 (Touching)**: 物体に軽く*触れる*ことは許容されるが，推奨されない．
ただし，ロボットは何かに衝突することは許されていない．
[安全第一！ (Safety First!)](#安全第一！-safety-first)のルールは他のルールよりも優先される．

1. **重大な衝突 (Major collisions)**: 競技中にロボットが何かに衝突した場合，ロボットは即座に停止することが求められる．
追加のペナルティが適用される場合がある．

1. **機能的な接触 (Functional touching)**: ロボットは構造部品以外の部分を使用して物に圧力をかけ，家具を押しのけ，一般的には環境とインタラクションすることが許可されている．
これは*機能的な接触 (functional touching)*として知られている．
ただし，ロボットは衝突のような相互作用を明確にアナウンスし，停止しないように丁寧に要求する必要がある．

> [!WARNING]
> 審判は危険な行動の疑いがある場合，ロボットを即座に停止する場合がある．

### ロボットの撤去 (Removal of robots)

ルールに従わないロボットは停止され，*Arena*から撤去される．

1. ロボットを撤去するかどうか，およびいつ撤去するかは，審判と競技を監視するTCメンバーの判断となる．

1. 審判または競技を監視するTCメンバーから指示された場合，チームはロボットを*即座に*停止し，テストを妨げることなくアリーナから撤去する必要がある．

1. ロボットが停止した後，複数のチームメンバーがアリーナに入り，ロボットを迅速に撤去することが許可される．

### 開始シグナル (Start signal)

デフォルトの*開始シグナル (start signal)*（特に明示されていない場合）は*ドアの開閉 (door opening)*となる．
ロボットはドアの後ろに待機し，*Arena*の外にいるチームメンバーと一緒にいることが求められる．
競技は，審判（チームメンバーではない）がドアを開けるときに開始される．
<!-- 他の開始シグナルも許可されていますが，*Robot Inspection*中に*Technical Committee*（TC）によって承認される必要があります． -->

### *Arena*への入場と退出 (Entering and leaving the *Arena*)

1. **開始位置 (Start position)**: 特に明示されていない限り，ロボットは*Arena*の外から開始する．

1. **入場 (Entering)**: ロボットは自律的に*Arena*に入場する必要がある．

<!-- N/A  -->
<!-- ### ジェスチャー (Gestures) -->

<!-- 手のジェスチャーは，以下の方法でロボットを制御するために使用できます: 

1. **定義**: チームは手のジェスチャーを自分で定義します．

1. **承認**: ジェスチャーは審判とテストを監視するTCメンバーによって承認される必要があります．
ジェスチャーは，両腕の動き以上を含めてはなりません．
これには，手話や指差しのジェスチャーなどが含まれます．

1. **オペレーターへの指示**: チームはオペレーターに指示する責任があります．
    1. チームは，審判から指示された場合にのみオペレーターに指示することができます．
    1. チームは，審判の存在下でのみオペレーターに指示することができます．
    1. チームは，審判が許可する範囲内でのみオペレーターに指示することができます．
    1. ロボットがオペレーターに指示する場合，チームではなくロボットがオペレーターに指示することになります．
  チームは，オペレーターに追加のガイドをすることは許可されていません．例えば，オペレーターに近づくように伝えたり，声を大きくしたり，コマンドを繰り返すように伝えたりすることはできません．
    1. ロボットはいつでもオペレーターに指示することができます．

1. **ジェスチャーの受け取り**: 特に明示されていない限り，スピーチコマンドを使用してロボットを特別なモードに設定することは許可されていません． -->

### 審判 (Referees)

すべての競技は，*Technical Committee*（TC）のメンバーである審判によって監視されます．
審判は，時間を計測し，スコアシートに記入するためのアシスタントを任命する場合があります．
以下のルールが適用されます: 

1. **選択 (Selection)**: 審判はEC/TC/OCによって選ばれる．

1. **審判の指示 (Referee instructions)**: 各競技の直前に，審判は競技中にアシスタントを一人または複数人選び，競技中にアシスタントに指示する．

> [!NOTE]
> アシスタントの選択プロセスに関する詳細は，[競技タスクの評価 (Regular Tasks Evaluation)](#競技タスクの評価-regular-tasks-evaluation)をご覧ください．

### オペレーター (Operators)

<!-- 特に明示されていない限り，ロボットは審判または審判によって選ばれた人物によって操作されます．
デフォルトのオペレーターが理解できない場合，チームはカスタムオペレーターの使用を要求することができます．
カスタムオペレーターを使用する場合，ペナルティが適用される場合があります． -->

特に明示されていない限り，ロボットは競技チームによって選ばれた人物によって操作される．
ただし，審判によって競技チーム以外の*オペレーター*が選ばれる場合もある．

### 時間制限 (Time limits)

1. **競技タスク (Regular Task)**: 各競技に設定された時間制限は*厳密に*守られる．
ルールセクションで各タスクの時間制限を確認してください．

1. **セットアップ時間 (Setup time)**: 特に明示されていない限り，セットアップ時間は*5分*となる．
ロボットは，前のチームのドアが閉まってから，直ちに準備が整っている必要がある．

1. **タイムアップ (Time-up)**: 時間が切れた場合，チームは即座にロボットを*Arena*から撤去する必要がある．
追加のポイントは得られない．

1. **ショーは続く (Show must go on)**: 特別な場合，審判はロボットがデモンストレーションの目的で競技を続行することを許可する場合があるが，追加のポイントは得られない．

<!-- 1. **非活動**: ロボットは静止したり，無限ループに陥ったりすることは許されません．
タスクの実行中に進展しない（明らかに進展しようとしていない）ロボットは非活動と見なされます．
ロボットは非活動状態が30秒続いた後に撤去される必要があります． -->

<!-- 1. **時間の要求**: ロボット（チームではなく）は，30秒の非活動時間制限からの例外を審判に要求することができます．
要求の中で，ロボットは時間のかかるプロセス（例: 60秒）を明確に述べる必要があります．
この時間は3分を超えることはできず，テストごとに1回しか使用できません． -->


## Deus ex Machina: 人間の助けを借りて特定のタスクをバイパスする

**ショーは続かなければならないものである**

<!-- ロボットは，タスクの主な目標を達成しない限り，スコアを獲得することはできません． -->
実環境では，小さな故障によってロボットがタスクを達成するのを妨げることが考えられる．
このような状況を防ぐために，人間との相互作用を通して，ロボットは競技中に人間の助けを要求することが許可されている．

> [!NOTE]
> 望ましくない状況を回避し，部分的なタスクでも完了するために，積極的に*Deus ex Machina*の機能を使用することが推薦される．

### 手順 (Procedure)

競技中に人間の助けを要求する手順は次のようになる．

- **助けを要求する (Request help)**: ロボットは明確かつはっきりと人間の助けが必要であることを示さなければならない．
次のことが明確に述べられている必要がある．
  - 助けの性質
  - 特定の目標または希望する結果
  - 行動が必要な場合は，行動の方法
  - ロボットとの相互作用の詳細（必要な場合）

<!-- 1. **監視する**: ロボットは人間の行動に注意を払い，要求された行動が完了したことを判断できるようにする必要があります．また，プロセス中に人間アシスタントを案内する必要がある場合は，案内する必要があります． -->

<!-- 1. **感謝する**: ロボットは提供された助けに対して礼儀正しく感謝しなければなりません． -->

### 例 (Examples)

各競技タスクには，*Deus Ex Machina*がさまざまな機能を提供している．
詳細については，各競技タスクの内容を確認してください．

> [!NOTE]
> 特定の*Deus Ex Machina*の機能を追加したい場合は，GitHub Issueを通じてお知らせください．

審判は，ロボットからの指示（例: 「ドアを開けてください」，「椅子を動かしてください」，「オブジェクトを取って手に置いてください」など）に対して，できるだけ明確に応答しようとする．
ただし，ゲストからの不明瞭な声，英語または日本語以外の言語での指示，読み取りにくい画像など，審判の制限を超えるポイントは対応できない．

> [!WARNING]
> *Deus Ex Machina*でも，*External Computing*からロボットに直接コマンドを送信することは禁止されている．
このツールの主な目的は，ロボットとの相互作用を簡素化することとなる．

### スコアリング (Scoring)

ロボットが*Deus Ex Machina*の機能を使用して人間の助けを要求する回数に制限はない．
ただし，*Deus Ex Machina*を使用すると，タスクごとにポイントが減点される場合がある．
詳細については，各競技タスクのルールを参照してください．

1. **ボーナス (Bonuses)**: ロボットがタスクの一部を達成するために助けを要求した場合でも，ボーナスポイントを獲得することができる．
ただし，そのタスクの部分的なスコアまたは全体のスコアは，獲得したポイントから減点される場合がある．

1. **スコア減点の重複 (Score reduction overlap)**: 同じ種類の複数の要求に対するスコア減点は重複されない．
適用される総減点は，最も悪い実行（すべての関連する助けの要求の減点が最も高い）に適応される．
すなわち，ロボットが2つ目のオブジェクトの輸送のために助けを要求しても，再び減点されることはないが，ドアの開閉のような別のタスクを要求する場合には2回目の減点が適用される．

1. **許可される助けの種類 (Allowed types of assistance)**: 特定のタスクで許可される助けの種類は，各競技タスクの説明に明記されている．
競技タスクの説明で明示的に言及されている助けの種類のみが実際にタスクで許可されている．
その他の助けの種類は許可されず，それらが適用されるタスクの一部の獲得ポイントは無効になる．
たとえば，マニピュレーションに焦点を当てたタスクが，人にマニピュレーションを実行するための*Deus Ex Machina*のペナルティを明示的に言及していない場合，これは利用できる抜け道ではないと考えるべきである．

### リスタート (Restart)

*RCJ2024*では，チームは制限時間内に何度でもリスタートすることが許可されている．
ただし，リスタート直後に完了したタスクから得られるポイントは半分に減点される．
その後，ポイントは競技タスクのスコアシートに設定された通りに与えられる．


## 特別なペナルティとボーナス (Special penalties and bonuses)

### 欠席に対するペナルティ (Penalty for not attending)

競技中のペナルティに加えて，無断欠席に対してもペナルティが課される．
競技開始まで以下のポイントを確認してください．

1. **自動スケジュール (Automatic schedule)**: すべてのチームはすべての競技に自動的にスケジュールされる．

1. **アナウンス (Announcement)**: チームが競技に参加できない場合（何らかの理由で），チームリーダーは競技が始まる*60分*前までにOC/TCにこれを通知する必要がある．

1. **ペナルティ (Penalties)**: チームが予定された競技が始まる時点で出席していない場合，チームはその競技に参加することはできません．
チームが参加しないことを通知していない場合，*500ポイント*のペナルティが課される．

### 特別なペナルティ (Extraordinary penalties)

1. **不正行為に対するペナルティ (Penalty for cheating)**: チームのメンバーが不正行為や[フェアプレイ (Fair Play)](#フェアプレイ-fair-play)のルール違反を行った場合，チームは実施中の競技から自動的に失格となり，*500ポイント*のペナルティが課される．
また，*Technical Committee*（TC）はチームを大会からも失格させることがある．

1. **ロボットの偽装に対するペナルティ (Penalty for faking robots)**: チームが競技を開始したが，部分的なタスクを解決しない（そして明らかに解決しようとしていない）場合，*250ポイント*のペナルティが課される．
審判と監視TCメンバーによって判断される．

1. **衝突に対する追加のペナルティ (Extra penalty for collision)**: 重大な（重大に）過失のある衝突の場合，*Technical Committee*（TC）はチームをテストから失格させる（チームは*0ポイント*を受け取る）か，大会から失格させることがある．

1. **審判または審査員としての出席不足 (Not showing up as referee or jury member)**: チームが審判または審査員を提供しない場合（*Arena*に時間通りにいること），チームは*250ポイント*のペナルティを受け取り，将来の競技の予選決定に影響することがある．
スコアリングの際に不適切な評価をする審査員を発覚した場合，審査員から除外され，チームは競技から失格する（*0ポイント*を受け取る）ことがある．

1. **標準プラットフォームロボットの改造または変更 (Modifying or altering standard platform robots)**: Standard Platform Leagueのロボットに無許可の改造が見つかった場合，責任を負うチームは即座に大会から失格となり，総合スコアに*500ポイント*のペナルティが課される．
この行動は将来の大会の予選決定に影響することがある．

### 優れたパフォーマンスに対するボーナス (Bonus for outstanding performance)

*RCJ2024*では，*優れたパフォーマンスに対するボーナス*はない．
