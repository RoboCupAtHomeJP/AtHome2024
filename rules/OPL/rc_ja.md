<sub>[READMEへ](../../README.md)</sub>

[日本語](./rc_ja.md) | [English](./rc_en.md)

# Receptionist - RC

参考動画: https://youtu.be/p9ki89buY68

> [!WARNING]
> この動画は参考動画であり，RoboCup@Home JapanOpenのルールと異なる可能性がある．


## タスク説明 (Description)

ロボットは，新しい2人のゲストをリビングルーム（*living room*）に連れて行き，ホストに紹介し，座る場所を提供する．

## フォーカス (Focus)

*システム統合*，*ヒューマンロボットインタラクション*，*人検出*，*人認識*

## セットアップ (Setup)

- **場所 (Location)**:
   - 競技は*living room*で行われる．
   - **開始位置 (Starting Location)**: ロボットは*Arena*内の入り口付近からスタートし，*Setup Days*中に発表される．
   - **入り口 (Entrance)**: 入り口のドアは基本的に開いている．
   <!-- チームリーダーは，ドアを閉めてゲストのために開けることで追加ポイントを獲得するために，ドアを閉めることを要求することができます． -->
- **人物 (People)**:
   - **ホスト (Host)**: 競技前にホストの名前と好きな飲み物が発表される．
   ホストの事前に定義された場所（*predefined location*）は，*Setup Days*に発表される．
   - **ゲスト (Guests)**: 両方のゲストには名前と好きな飲み物があります．
   到着するゲストは，ドアが開いているときに，ロボットの前に立つ．
   ゲストはホストの*predefined location*に案内され，ホストに紹介する必要がある．
   ゲストはそれぞれ別々に到着する．
   <!-- ドアが閉まっている場合はベルを鳴らす． -->

> [!NOTE]
> *名前と飲み物のリスト*や*Starting Location*などの情報は，[AtHome2024](https://github.com/RoboCupAtHomeJP/AtHome2024/)のリポジトリで*Setup Days*に公開される．


## 進行 (Procedure)

1. 開始フェーズ (Start Phase)

   1. **競技時間 (Task Time)**: 制限時間は**7分**までとする．

   1. **セットアップ (Setup)**: TCはチームにロボットを*Starting Location*に移動するよう指示する．

   1. **スタート (Start)**: TCがスタートの合図を出し，タイマーを開始する．
   チームはセットアップを完了させ（スタートボタンを押すなど），そのエリアを離れる．
   2つ以上のボタンを押すなどの複雑なセットアップ手順は許可されない．

1. 受付フェーズ (Reception Phase)

   1. **検出 (Detection)**: ロボットは到着し部屋に入るゲストを検出する．

   1. **受付 (Reception)**: ロボットはゲストの名前と好きな飲み物を聞く．
   ロボットが名前や好きな飲み物を理解できない場合，ロボットはゲストに質問を繰り返すことができ，ペナルティはない．

   1. **紹介 (Introduction)**: ロボットは到着したゲストの名前と好きな飲み物をホストに紹介する．

1. 案内フェーズ (Guidance Phase)

   1. **座席案内 (Seating People)**: ロボットはゲストが座ることができる場所（空いている席）の位置を指し示さなければならない．

   1. **席替え (Switching Places)**: ゲストは座った後に席を交換することがある．

1. ボーナスフェーズ (Guidance Phase)

   1. **特徴説明 (Description)**: ロボットは1人目のゲストの特徴（例: 衣服の色，髪の色，性別，年齢）を4つ2人目のゲストに伝えることでボーナスポイントを獲得できる．

> [!IMPORTANT]
> ロボットが人間と対話する際には，対話相手に注意を払う必要がある．
例えば，話す間は1人を指差し，もう1人を向き，または2人の間を交互に見ることができる．


## デウス・エクス・マキナ (Deus Ex Machina)

このタスクでは，以下の*デウス・エクス・マキナ (Deus Ex Machina)*を使用することができます．
*Deus Ex Machina*を使用することで，対応するアクションのポイントはすべて得られないが，
より簡単な方法でタスクを続行するためにアクションをスキップすることができる．

| アクション (Action) | バイパス方法 (Bypassing) |
| ---------- | ------------ |
| 人認識　   | マーカーを用いて人間を特定し注意を向ける |
| 空席検出   | マーカーを用いて空席を検出する |


## スコアシート

| アクション (Action) | スコア (Score) |
| ------ | ----- |
| **メインタスク (Main Task)**                        |  |
| 1. 1人目のゲストをホストに紹介する                  |  |
| &emsp; - 1人目のゲストの名前を紹介する              | $25$ |
| &emsp; - 1人目のゲストの好きな飲み物を紹介する      | $25$ |
| &emsp; - 紹介中，1人目のゲストに注意を向ける        | $35$ |
| 2. 1人目のゲストに空いている席を案内する            |  |
| &emsp; - 空席を検出する                             | $60$ |
| &emsp; - 空席を指差す／向いて提供する               | $65$ |
| 3. 2人目のゲストをホストに紹介する                  |  |
| &emsp; - 2人目のゲストの名前を紹介する              | $25$ |
| &emsp; - 2人目のゲストの好きな飲み物を紹介する      | $25$ |
| &emsp; - 紹介中，2人目のゲストに注意を向ける        | $35$ |
| 4. 2人目のゲストに空いている席を案内する            |  |
| &emsp; - 空席を検出する                             | $60$ |
| &emsp; - 空席を指差す／向いて提供する               | $65$ |
| **ボーナスタスク (Bonus Task)**                     |   |
| &emsp; - 1人目のゲストについて4つの特徴を説明する   | $4 \times 20$ |
| ***デウス・エクス・マキナ (Deus Ex Machina)***      |  |
| &emsp; - マーカーを用いて人間を特定し注意を向ける   | $-17.5$ |
| &emsp; - マーカーを用いて空席を検出する             | $-60$ |
| **ペナルティ (Penalty)**                            |  |
| &emsp; - リスタート                                 | $直後に獲得した点数 \times 0.5$|
| &emsp; - 不参加（無断）                             | $-500$ |
| **合計 (ボーナス点を含む)**                         | $500$ |

**得点係用のスコアシート**: [RC-score_sheet](./doc/RCJ2024_OPL_RC-score_sheet.pdf)


## 指示 (Instructions)

### ボランティアへ (To Volunteer)

ボランティアは競技チームによって自由に選ばれ，以下のタスクを行う． 

- `ホスト`の役するボランティアを1名選ぶ．
- `ゲスト`の役するボランティアを2名選ぶ．
- 競技が始まる**30分前**に集まる．
- ゲストとホストの情報についての指示を受ける．
- ホストは指定された*predefined location*を離れない必要がある．
- ゲストはロボットからの指示に従い，自分自身で行動しないでください．

> [!WARNING]
> ゲストに関する情報は競技チームと共有してはいけない．
そのような行為はペナルティの付加や競技の失格につながる可能性がある．

> [!NOTE]
> ボランティアできる人数が足りない場合，
他チームからの支援をお願いする場合がある．

### 得点係へ (To Scorer)

得点係は*General Rules*の[採点方法](./gr_ja.md#採点方法scoring-system)に定義されているように選ばれ，以下のタスクを行う．

- 競技が始まる**30分**前に集まる．
- スコアシートの情報についての指示を受ける．
- 競技チームの競技をスコアリングする．
- 他の得点係とTCとスコアを確認し合う．
- スコアシートをTCに提出する．

> [!WARNING]
> ゲストに関する情報は競技チームと共有してはいけない．
そのような行為はペナルティの付加や競技の失格につながる可能性がある．

### TCへ (To TC)

- *Setup Days*中: 
   - ホストの*predefined location*を発表する．
   - 名前と飲み物のリストを発表する．
   - ロボットの*Starting Location*を発表する．
- 競技前: 
   - ホストの名前と好きな飲み物を発表する．
   - 競技チームによって選ばれたホストとゲストの役をするボランティアを確認する．
   - 3名のボランティアに名前と飲み物を割り当てる．
- 競技中: 
   - *living room*の席に座っている1番目のゲストに席替えの有無とそのタイミングを指示する．
